!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es.symbol.js"),require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.symbol.iterator.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.symbol.async-iterator.js"),require("core-js/modules/es.symbol.to-string-tag.js"),require("core-js/modules/es.json.to-string-tag.js"),require("core-js/modules/es.math.to-string-tag.js"),require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.get-prototype-of.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.object.set-prototype-of.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/esnext.global-this.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.get-own-property-descriptor.js"),require("core-js/modules/es.object.get-own-property-descriptors.js"),require("core-js/modules/es.object.define-properties.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/web.url-search-params.js"),require("core-js/modules/es.string.search.js"),require("core-js/modules/web.url.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es.symbol.js","core-js/modules/es.symbol.description.js","core-js/modules/es.object.to-string.js","core-js/modules/es.symbol.iterator.js","core-js/modules/es.array.iterator.js","core-js/modules/es.string.iterator.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.symbol.async-iterator.js","core-js/modules/es.symbol.to-string-tag.js","core-js/modules/es.json.to-string-tag.js","core-js/modules/es.math.to-string-tag.js","core-js/modules/es.object.define-property.js","core-js/modules/es.object.get-prototype-of.js","core-js/modules/es.function.name.js","core-js/modules/es.object.set-prototype-of.js","core-js/modules/es.promise.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.array.slice.js","core-js/modules/esnext.global-this.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.replace.js","core-js/modules/es.object.keys.js","core-js/modules/es.array.filter.js","core-js/modules/es.object.get-own-property-descriptor.js","core-js/modules/es.object.get-own-property-descriptors.js","core-js/modules/es.object.define-properties.js","core-js/modules/es.array.index-of.js","core-js/modules/es.string.split.js","core-js/modules/es.array.join.js","core-js/modules/es.array.concat.js","core-js/modules/web.url-search-params.js","core-js/modules/es.string.search.js","core-js/modules/web.url.js","core-js/modules/es.regexp.to-string.js","core-js/modules/es.array.includes.js","core-js/modules/es.string.includes.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).zenfi=t()}(this,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;!function(t){var r=function(t){var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof j?t:j,i=Object.create(o.prototype),s=new L(n||[]);return i._invoke=function(e,t,r){var n=h;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=q(s,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=f(e,t,r);if("normal"===c.type){if(n=r.done?m:d,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=m,r.method="throw",r.arg=c.arg)}}}(e,r,s),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function j(){}function g(){}function v(){}var w={};u(w,s,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(_([])));k&&k!==n&&o.call(k,s)&&(w=k);var x=v.prototype=j.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(t,r){function n(i,s,a,c){var u=f(t[i],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===e(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):r.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;this._invoke=function(e,t){function o(){return new r((function(r,o){n(e,t,r,o)}))}return i=i?i.then(o,o):o()}}function q(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,q(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,y):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function _(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:r,done:!0}}return g.prototype=v,u(x,"constructor",v),u(v,"constructor",g),g.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},E(O.prototype),u(O.prototype,a,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(x),u(x,c,"Generator"),u(x,s,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=o.call(s,"catchLoc"),u=o.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"===("undefined"==typeof globalThis?"undefined":e(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}({exports:{}});var r={exports:{}};!function(e,t){e.exports=function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=["selector","value"],u="value",l="click",f="text",h=function(e){var t=e.selector,r=e.value,n=a(e,c).strategy||u,o=document.querySelector(t);return o?(n===u&&(o.value=r),n===f&&(o.innerText=r),n===l&&o.click(),o):null},d={exports:{}};!function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(r);/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+a}}function s(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return s(e,!1)},o.getJSON=function(e){return s(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))},e.exports=r()}(d);var p=d.exports,m={url:"https://api.zenfi.mx/products/leads/info",method:"GET"},y={url:"https://api.zenfi.mx/webhooks/leads/:partner/:type",method:"POST"},j={Accept:"application/json","Content-Type":"application/json"};function g(){return(g=n(regeneratorRuntime.mark((function e(t){var r,n,o,i,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=m).url,o=r.method,i="".concat(n,"?token=").concat(t),e.next=4,fetch(i,{method:o,headers:j});case 4:return s=e.sent,e.next=7,s.json();case 7:if(a=e.sent,!s.ok){e.next=10;break}return e.abrupt("return",a.info||{});case 10:if(401!==s.status){e.next=12;break}throw new Error("UNAUTHORIZED");case 12:throw new Error(a.code);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v="zfid",w="zftoken",b=h,k=function(e){var t=e.domain,r="zenfi_id",n="zenfi_token",o=function(e){return p.get(e)},i=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365;return p.set(e,r,{domain:t,expires:n,path:"/",secure:!0})};return{getId:function(){return o(r)},setId:function(e){return i(r,e)},getToken:function(){return o(n)},setToken:function(e){return i(n,e)},removeToken:function(e){return r=n,p.remove(r,{domain:t,path:"/"});var r},set:i,get:o}},x=function(e){return g.apply(this,arguments)},E=function(e){var t=e.meta,r=e.type,n=e.event,o=e.partner,i=e.zenfiId,s=y,a=s.url,c=s.method,u=a.replace(":type",r).replace(":partner",o),l={zenfiId:i,event:n,meta:t};return fetch(u,{method:c,headers:j,body:JSON.stringify(l)}).then((function(e){return e.json()}))},O=function(e){var t=new URLSearchParams(e.search);return{id:t.get(v)||null,token:t.get(w)||null}},q=function(e){var t=new URL(e),r=new URLSearchParams(t.search);return r.delete(w),t.search=r.toString(),t.toString()},P=function(e){return null==e},S=function(e){return e&&"[object Function]"==={}.toString.call(e)},L=function(){var e="locationchange",t=window.history,r=t.pushState,n=t.replaceState;window.history.pushState=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=r.apply(window.history,n);return window.dispatchEvent(new Event(e)),i},window.history.replaceState=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=n.apply(window.history,r);return window.dispatchEvent(new Event(e)),i},window.addEventListener("popstate",(function(){window.dispatchEvent(new Event(e))}))};return function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.partnerName,n=t.cookiesDomain,i=t.targets;o(this,e),this._id=null,this._token=null,this.leadInfo=null,this.partnerName=r,this.targets=i,this.cookies=k({domain:n}),this._handleUrlParams()}var r,s,a,c;return r=e,(s=[{key:"_handleUrlParams",value:function(){var e=O(location),t=e.id,r=e.token;t&&(this.id=t),r&&(this.token=r,history.replaceState(null,null,q(location.href)))}},{key:"id",get:function(){return this._id||(this._id=this.cookies.getId()),this._id},set:function(e){this._id=e||null,this.cookies.setId(this._id)}},{key:"token",get:function(){return this._token||(this._token=this.cookies.getToken()),this._token},set:function(e){this._token=e||null,this._token?this.cookies.setToken(this._token):this.cookies.removeToken()}},{key:"fetchData",value:(c=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}return e.abrupt("return",null);case 2:if(e.prev=2,this.leadInfo){e.next=7;break}return e.next=6,x(this.token);case 6:this.leadInfo=e.sent;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.message.includes("UNAUTHORIZED")&&(this.token=null);case 12:return e.abrupt("return",this.leadInfo);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return c.apply(this,arguments)})},{key:"fillTargets",value:(a=n(regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:(this.targets||[]).forEach((function(e){var n=e||{},o=n.dataKey,i=n.strategy,s=n.beforeAction,a=n.afterAction,c=(r.leadInfo||{})[o];if(!P(c)){var u={value:c,selector:S(e.selector)?e.selector({dataKey:o,strategy:i,value:c}):e.selector,strategy:i};S(s)&&s(u);var l=b(u);l&&S(a)&&a(t(t({},u),{},{element:l}))}}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"trackEvent",value:function(e,t,r){if(!this.token)return null;if(!this.partnerName)throw new Error('Parameter "partnerName" is required to track events');return E({type:e,partner:this.partnerName,zenfiId:this.id,event:t,meta:r})}},{key:"trackConversion",value:function(e,t){this.trackEvent("converted",e,t)}},{key:"trackAbortion",value:function(e,t){this.trackEvent("aborted",e,t)}},{key:"trackPageView",value:function(){var e={href:window.location.href,hash:window.location.hash,search:window.location.search,protocol:window.location.protocol,hostname:window.location.hostname,pathname:window.location.pathname};this.trackConversion("PageView",e)}},{key:"initPageViewsTracking",value:function(){var e=this;this.trackPageView(),L(),window.addEventListener("locationchange",(function(){return e.trackPageView()}))}}])&&i(r.prototype,s),e}()}()}(r);var n=new(0,r.exports)({cookiesDomain:location.hostname.replace("www.","").replace("app.",""),partnerName:"creditea",targets:[{dataKey:"email",selector:'input[name="sugEmail"]',afterAction:function(e){return e.element.dispatchEvent(new Event("change"))}},{dataKey:"name1",selector:'input[name="sugFirstName"]',afterAction:function(e){return e.element.dispatchEvent(new Event("change"))}},{dataKey:"name2",selector:'input[name="sugSecondName"]',afterAction:function(e){return e.element.dispatchEvent(new Event("change"))}},{dataKey:"lastName1",selector:'input[name="sugPaternalName"]',afterAction:function(e){return e.element.dispatchEvent(new Event("change"))}},{dataKey:"lastName2",selector:'input[name="sugMaternalName"]',afterAction:function(e){return e.element.dispatchEvent(new Event("change"))}}]}),o=function(){var e,r=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchData();case 2:n.fillTargets();case 3:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(o,i){var s=e.apply(r,n);function a(e){t(s,o,i,a,c,"next",e)}function c(e){t(s,o,i,a,c,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return o(),n.initPageViewsTracking(),n}));
//# sourceMappingURL=index.js.map
